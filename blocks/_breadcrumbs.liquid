
{%- assign block_settings = block.settings -%}
{%- assign separator = block_settings.separator -%}
{%- assign breadcrumb_items = '' -%}

{%- comment -%} Build breadcrumb items array {%- endcomment -%}
{%- if block_settings.item_1_text != blank -%}
  {%- assign breadcrumb_items = breadcrumb_items | append: '1,' -%}
{%- endif -%}
{%- if block_settings.item_2_text != blank -%}
  {%- assign breadcrumb_items = breadcrumb_items | append: '2,' -%}
{%- endif -%}
{%- if block_settings.item_3_text != blank -%}
  {%- assign breadcrumb_items = breadcrumb_items | append: '3,' -%}
{%- endif -%}
{%- if block_settings.item_4_text != blank -%}
  {%- assign breadcrumb_items = breadcrumb_items | append: '4,' -%}
{%- endif -%}
{%- if block_settings.item_5_text != blank -%}
  {%- assign breadcrumb_items = breadcrumb_items | append: '5' -%}
{%- endif -%}

{%- assign items_array = breadcrumb_items | split: ',' -%}

{%- if items_array.size > 0 -%}
  <nav class="breadcrumbs" role="navigation" aria-label="breadcrumbs" {{ block.shopify_attributes }}>
    {%- for item in items_array -%}
      {%- assign item_text_key = 'item_' | append: item | append: '_text' -%}
      {%- assign item_link_key = 'item_' | append: item | append: '_link' -%}
      {%- assign item_text = block_settings[item_text_key] -%}
      {%- assign item_link = block_settings[item_link_key] -%}
      
      {%- unless forloop.first -%}
        <span class="breadcrumbs__separator" aria-hidden="true">{{ separator }}</span>
           <span class="breadcrumbs__dot" aria-hidden="true"></span>
      {%- endunless -%}
      
      {%- if item_link != blank -%}
        <a href="{{ item_link }}" class="breadcrumbs__link">{{ item_text }}</a>
      {%- else -%}
        <span class="breadcrumbs__text">{{ item_text }}</span>
      {%- endif -%}
    {%- endfor -%}
  </nav>
{%- endif -%}

{% stylesheet %}
  .breadcrumbs {
display: flex;
    align-items: center;
    justify-content: center;
    /* flex-wrap: wrap; */
    gap: .5rem;
    padding-bottom: 10px;
    padding-top: 10px;
    font-size: .875rem;
    line-height: 1.5;
  }

  .breadcrumbs__link {
    color: var(--color-foreground);
    text-decoration: none;
    transition: opacity 0.2s ease;
  }

  .breadcrumbs__link:hover {
    opacity: 0.7;
    text-decoration: underline;
  }

  .breadcrumbs__text {
    color: var(--color-foreground);
  }
  .breadcrumbs__dot::before {
    content: "";
    display: block;
    width: 5px;
    height: 5px;
    border-radius: 100%;
    background-color: currentColor;
    margin: 0 1.875rem;
        opacity: .8;
        flex-shrink: 0;
  }

  .breadcrumbs__separator {
    color: var(--color-foreground);
    opacity: 0.6;
  }

  @media screen and (max-width: 749px) {
    .breadcrumbs {
      font-size: 0.75rem;
      padding: 0.5rem 0.75rem;
      gap: 0.375rem;
    }
  }
{% endstylesheet %}

{% schema %}
{ 
  "name": "Breadcrumbs",
  "tag": "div",
  "settings": [
    {
      "type": "textarea",
      "id": "separator",
      "label": "Separator",
      "default": "›",
      "info": "Character to separate breadcrumb items (e.g., ›, /, >)"
    },
    {
      "type": "header",
      "content": "Breadcrumb Item 1"
    },
    {
      "type": "text",
      "id": "item_1_text",
      "label": "Text",
      "default": "Home"
    },
    {
      "type": "url",
      "id": "item_1_link",
      "label": "Link (optional)",
      "info": "Leave empty for text only"
    },
    {
      "type": "header",
      "content": "Breadcrumb Item 2"
    },
    {
      "type": "text",
      "id": "item_2_text",
      "label": "Text"
    },
    {
      "type": "url",
      "id": "item_2_link",
      "label": "Link (optional)",
      "info": "Leave empty for text only"
    },
    {
      "type": "header",
      "content": "Breadcrumb Item 3"
    },
    {
      "type": "text",
      "id": "item_3_text",
      "label": "Text"
    },
    {
      "type": "url",
      "id": "item_3_link",
      "label": "Link (optional)",
      "info": "Leave empty for text only"
    },
    {
      "type": "header",
      "content": "Breadcrumb Item 4"
    },
    {
      "type": "text",
      "id": "item_4_text",
      "label": "Text"
    },
    {
      "type": "url",
      "id": "item_4_link",
      "label": "Link (optional)",
      "info": "Leave empty for text only"
    },
    {
      "type": "header",
      "content": "Breadcrumb Item 5"
    },
    {
      "type": "text",
      "id": "item_5_text",
      "label": "Text"
    },
    {
      "type": "url",
      "id": "item_5_link",
      "label": "Link (optional)",
      "info": "Leave empty for text only"
    }
  ],
  "presets": [
    {
      "name": "Breadcrumbs",
      "settings": {
        "item_1_text": "Home",
        "item_1_link": "/"
      }
    }
  ]
}
{% endschema %}
